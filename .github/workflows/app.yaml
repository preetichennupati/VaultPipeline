name: CI/CD for react Todo 

on:
  push:
    branches:
      - main

jobs:
    build:
      runs-on: self-hosted
      # ...
      steps:
        # ...
        - name: Import Vault Secrets
          id: import-secrets
          uses: hashicorp/vault-action@v2
          with:
            url: http://18.233.166.63:8200
            token: ${{ secrets.VAULT_TOKEN }}
            secrets: |
                demoVault/data k1 ;
        # ...
    stop-runner:
      runs-on: self-hosted
      steps:
      - name: Stop EC2 Runner
        env:
          AWS_REGION: ${{ secrets.AWS_REGION }}
          INSTANCE_ID: ${{ secrets.INSTANCE_ID }}
        run: |
          # Stop EC2 instance using AWS CLI
          aws ec2 stop-instances --instance-ids $INSTANCE_ID --region $AWS_REGION
